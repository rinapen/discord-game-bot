STAKE_MINES_MULTIPLIERS = {
    1: [1.0300, 1.0800, 1.1200, 1.1800, 1.2400, 1.3000, 1.3700, 1.4600, 1.5500, 1.6500, 1.7700, 1.9000, 2.0600, 2.2500, 2.4700, 2.7500, 3.0900, 3.5400, 4.1200, 4.9500, 6.1900, 8.2500, 12.3800, 24.7500],
    2: [1.0800, 1.1700, 1.2900, 1.4100, 1.5600, 1.7400, 1.6400, 2.1800, 2.4700, 2.8300, 3.2600, 3.8100, 4.5000, 5.4000, 6.6000, 8.2500, 10.6100, 14.1400, 19.8000, 29.7000, 49.5000, 99.0000, 297.0000],
    3: [1.1200, 1.2900, 1.4800, 1.7100, 2.0000, 2.3500, 2.7900, 3.3500, 4.0700, 5.0000, 6.2600, 7.9600, 10.3500, 13.8000, 18.9700, 27.1100, 40.6600, 65.0600, 113.8500, 227.7000, 569.2500, 2277.0000],
    4: [1.1800, 1.4100, 1.7100, 2.0900, 2.5800, 3.2300, 4.0900, 5.2600, 6.8800, 9.1700, 12.5100, 17.5200, 25.3000, 37.9500, 59.6400, 99.3900, 178.9100, 357.8100, 834.9000, 2504.7000, 12523.5000],
    5: [1.2400, 1.5600, 2.0000, 2.5800, 3.3900, 4.5200, 6.1400, 8.5000, 12.0400, 17.5200, 26.2700, 40.8700, 66.4100, 113.8500, 208.7200, 417.4500, 939.2600, 2504.7000, 8766.4500, 52598.7000],
    6: [1.3000, 1.7400, 2.3500, 3.2300, 4.5200, 6.4600, 9.4400, 14.1700, 21.8900, 35.0300, 58.3800, 102.1700, 189.7500, 379.5000, 834.9000, 2087.2500, 6261.7500, 25047.0000, 175329.0000],
    7: [1.3700, 1.9400, 2.7900, 4.0900, 6.1400, 9.4400, 14.9500, 24.4700, 41.6000, 73.9500, 138.6600, 277.3300, 600.8700, 1442.1000, 3965.7700, 13219.2500, 59486.0000, 475893.0000],
    8: [1.4600, 2.1800, 3.3500, 5.2600, 8.5000, 14.1700, 24.4700, 44.0500, 83.2000, 166.4000, 356.5600, 831.9800, 2163.1500, 6489.4500, 23794.6500, 118973.0000, 1070759.2500],
    9: [1.5500, 2.4700, 4.0700, 6.8800, 12.0400, 21.8900, 41.6000, 83.2000, 176.8000, 404.1000, 1010.2600, 2828.7300, 9193.3900, 36773.5500, 202254.5200, 2022545.2500],
    10: [1.6500, 2.8300, 5.0000, 9.1700, 17.5200, 35.0300, 73.9500, 166.4000, 404.1000, 1077.6100, 3232.8400, 11314.9400, 49031.4000, 294188.4000, 3236072.4000],
    11: [1.7700, 3.2600, 6.2600, 12.5100, 26.2700, 58.3800, 138.6600, 356.5600, 1010.2600, 3232.8400, 12123.1500, 56574.6900, 367735.5000, 4412826.0000],
    12: [1.9000, 3.8100, 7.9600, 17.5200, 40.8700, 102.1700, 277.3300, 831.9800, 2828.7300, 11314.9400, 56574.6900, 396022.8500, 5148297.0000],
    13: [2.0600, 4.5000, 10.3500, 25.3000, 66.4100, 189.7500, 600.8700, 2163.1500, 9193.3900, 49031.4000, 367735.5000, 5148297.0000],
    14: [2.2500, 5.4000, 13.8000, 37.9500, 113.8500, 379.5000, 1442.1000, 6489.4500, 36773.5500, 294188.4000, 4412826.0000],
    15: [2.4700, 6.6000, 18.9700, 59.6400, 208.7200, 834.9000, 3965.7700, 23794.6500, 202254.5200, 3236072.4000],
    16: [2.7500, 8.2500, 27.1100, 99.3900, 417.4500, 2087.2500, 13219.2500, 118973.2500, 2022545.2500],
    17: [3.0900, 10.6100, 40.6600, 178.9100, 939.2600, 6261.7500, 59486.6200, 1070759.2500],
    18: [3.5400, 14.1400, 65.0600, 357.8100, 2504.7000, 25047.0000, 475893.0000],
    19: [4.1200, 19.8000, 113.8500, 6489.4500, 9193.3900, 36773.5500, 202254.5200],
    20: [4.9500, 29.7000, 227.7000, 2504.7000, 52598.7000],
    21: [6.1900, 49.5000, 569.2500, 12523.5000],
    22: [8.2500, 99.0000, 2277.0000],
    23: [12.3700, 297.0000],
    24: [24.7500],
}

STAKE_MINES_WIN_RATES = {
    1: [0.9611, 0.9166, 0.8839, 0.8389, 0.7983, 0.7615, 0.7226, 0.6780, 0.6387, 0.6000,
        0.5593, 0.5210, 0.4805, 0.4400, 0.4008, 0.3600, 0.3203, 0.2796, 0.2402, 0.2000,
        0.1599, 0.1200, 0.0799, 0.0400],
    2: [0.9166, 0.8461, 0.7674, 0.7021, 0.6346, 0.5689, 0.5103, 0.4541, 0.4008, 0.3498,
        0.3036, 0.2598, 0.2200, 0.1833, 0.1500, 0.1200, 0.0933, 0.0700, 0.0500, 0.0333,
        0.0200, 0.0100, 0.0033],
    3: [0.8839, 0.7674, 0.6689, 0.5789, 0.4950, 0.4212, 0.3548, 0.2955, 0.2432, 0.1980,
        0.1581, 0.1243, 0.0956, 0.0717, 0.0522, 0.0365, 0.0243, 0.0152, 0.0087, 0.0043,
        0.0017, 0.0004],
    4: [0.8389, 0.7021, 0.5789, 0.4736, 0.3837, 0.3065, 0.2420, 0.1882, 0.1438, 0.1079,
        0.0791, 0.0566, 0.0391, 0.0261, 0.0166, 0.0100, 0.0055, 0.0028, 0.0012, 0.0004,
        0.0001],
    5: [0.7983, 0.6346, 0.4950, 0.3837, 0.2920, 0.2190, 0.1612, 0.1164, 0.0822, 0.0565,
        0.0377, 0.0242, 0.0149, 0.0087, 0.0047, 0.0024, 0.0011, 0.0004, 0.0001, 0.00002],
    6: [0.7615, 0.5689, 0.4212, 0.3065, 0.2190, 0.1532, 0.1048, 0.0699, 0.0452, 0.0283,
        0.0170, 0.0097, 0.0052, 0.0026, 0.0012, 0.0005, 0.0002, 0.0001, 0.00001],
    7: [0.7226, 0.5103, 0.3548, 0.2420, 0.1612, 0.1048, 0.0662, 0.0405, 0.0238, 0.0134,
        0.0071, 0.0036, 0.0016, 0.0007, 0.0002, 0.00002, 0.00001, 0.000001],
    8: [0.6780, 0.4541, 0.2955, 0.1882, 0.1164, 0.0699, 0.0405, 0.0225, 0.0119, 0.0059,
        0.0028, 0.0012, 0.0005, 0.0002, 0.00004, 0.00001, 0.000001],
    9: [0.6387, 0.4008, 0.2432, 0.1438, 0.0822, 0.0452, 0.0238, 0.0119, 0.0056, 0.0024,
        0.0010, 0.0004, 0.0001, 0.00005, 0.000005, 0.000005],
    10: [0.6000, 0.3498, 0.1980, 0.1079, 0.0565, 0.0283, 0.0134, 0.0059, 0.0024, 0.0009,
         0.0003, 0.0001, 0.00002, 0.000005, 0.000003],
    11: [0.5593, 0.3036, 0.1581, 0.0791, 0.0377, 0.0170, 0.0071, 0.0028, 0.0010, 0.0003,
         0.000080, 0.0000082, 0.0000018, 0.0000002],
    12: [0.5210, 0.2598, 0.1243, 0.0565, 0.0242, 0.0097, 0.0036, 0.0012, 0.0004, 0.0000875,
         0.0000175, 0.0000025, 0.0000002],
    13: [0.4805, 0.2200, 0.0956, 0.0391, 0.0149, 0.0052, 0.00164, 0.0004577, 0.0001077,
         0.0000202, 0.0000027, 0.0000002],
    14: [0.4400, 0.1833, 0.0717, 0.02608, 0.00869, 0.002608, 0.00068, 0.0001526, 0.0000269,
         0.0000034, 0.0000002],
    15: [0.4008, 0.1500, 0.05218, 0.01659, 0.00474, 0.00118, 0.00024, 0.0000416, 0.0000049, 0.000003],
    16: [0.3600, 0.1200, 0.03651, 0.00996, 0.00237, 0.0004743, 0.000074, 0.0000083, 0.0000005],
    17: [0.3203, 0.0933, 0.02434, 0.00553, 0.00105, 0.00016, 0.0000016, 0.00000009],
    18: [0.2796, 0.07001, 0.01521, 0.00276, 0.000395, 0.000395, 0.0000021],
    19: [0.2402, 0.05000, 0.00869, 0.00118, 0.0001113, 0.0000056],
    20: [0.2000, 0.03333, 0.00435, 0.0003953, 0.00000188],
    21: [0.1599, 0.02000, 0.00173, 0.0000791],
    22: [0.1200, 0.01000, 0.0004348],
    23: [0.08003, 0.003333],
    24: [0.0400]
}


def get_stake_multiplier(mine_count: int, revealed_count: int) -> float:
    """
    StakeのMines倍率表に基づいて、地雷数と開けた数から倍率を取得する。
    """
    if mine_count in STAKE_MINES_MULTIPLIERS:
        table = STAKE_MINES_MULTIPLIERS[mine_count]
        if 0 <= revealed_count - 1 < len(table):
            return round(table[revealed_count - 1], 4)
    return 1.0

def get_stake_win_rate(mine_count: int, revealed_count: int) -> float:
    if mine_count in STAKE_MINES_WIN_RATES:
        table = STAKE_MINES_WIN_RATES[mine_count]
        if 0 <= revealed_count - 1 < len(table):
            return table[revealed_count - 1]
    return 0.0